{% extends "base.html" %}
{% load static %}

{% block title %}Join game â€“ BlitzQuest{% endblock %}

{# === Stylesheets === #}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/game_join.css' %}">
{% endblock %}

{% block content %}
<div class="gj-page">
  {# === Main Join Form === #}
  <section class="gj-card gj-card-main">
    <h2 class="gj-title">Join a game</h2>
    <p class="gj-subtitle">
      Enter the game code shared by your friend to join their BlitzQuest lobby.
      Wait for the host to start, then compete in strategic board-based battles!
    </p>

    <form method="post" class="gj-form">
      {% csrf_token %}

      {# Form Fields #}
      {% for field in form %}
      <div class="gj-field">
        <label for="{{ field.id_for_label }}">{{ field.label }}</label>
        {{ field }}
        {% if field.help_text %}
        <div class="gj-help">{{ field.help_text }}</div>
        {% endif %}
        {% for error in field.errors %}
        <div class="gj-error">{{ error }}</div>
        {% endfor %}
      </div>
      {% endfor %}

      {# Non-field Errors #}
      {% if form.non_field_errors %}
      <div class="gj-error-block">
        {% for error in form.non_field_errors %}
        {{ error }}<br>
        {% endfor %}
      </div>
      {% endif %}

      {# Action Buttons #}
      <div class="gj-actions">
        <button type="submit" class="btn btn-primary">Join game</button>
        <a href="{% url 'game:game_list' %}" class="gj-secondary-link">
          Back to games list
        </a>
      </div>
    </form>
  </section>

  {# === Help Sidebar === #}
  <section class="gj-card gj-card-side">
    {# Finding the Code #}
    <h3 class="gj-side-title">Finding the Code</h3>
    <ul class="gj-side-list">
      <li>The host can share the <strong>Game Code</strong> displayed in their lobby.</li>
      <li>Codes follow the format <strong>ABC123</strong> (6 characters: letters + numbers).</li>
      <li>You can only join games in <strong>Waiting</strong> status before they start.</li>
    </ul>

    <div class="gj-divider"></div>

    {# What to Expect #}
    <h3 class="gj-side-title">What to Expect</h3>
    <ul class="gj-side-list">
      <li>Starting stats vary by game mode (board modes: 3 HP, 0 coins; Card Duel: custom deck).</li>
      <li><strong>Turn order</strong> is determined by a dice roll after all players join.</li>
      <li>Experience real-time gameplay with dice rolls, tile effects, questions, and strategic card usage!</li>
    </ul>
  </section>
</div>
{% endblock %}