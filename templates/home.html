{% extends "base.html" %}
{% load static %}

{% block title %}BlitzQuest ‚Äì Enter The Board World{% endblock %}

{% block body_class %}home-body{% endblock %}
{% block main_class %}full-width{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home_v2.css' %}">
{% endblock %}

{% block content %}

{# === 1. HERO: ENTER THE BOARD WORLD === #}
{# === 1. HERO: LEGACY (CHEST ANIMATION) === #}
<section class="hero">
  <div class="content-container hero-inner">
    {# Left: Text Content #}
    <div class="hero-left">
      <div class="hero-eyebrow">2‚Äì4 Player Online Board Game</div>

      <h1 class="hero-title">
        Roll the dice.<br>
        <span class="hero-highlight">Answer fast.</span><br>
        Outthink your rivals.
      </h1>

      <p class="hero-subtitle">
        BlitzQuest is a tactical knowledge board game built with Django.
        Move across the board, survive tricky tiles, and use support cards to
        sabotage your friends or secure the win.
      </p>

      {# Action Buttons #}
      <div class="hero-actions">
        {% if user.is_authenticated %}
        <a href="{% url 'game:game_create' %}" class="btn btn-primary hero-btn-main">
          Start Match
        </a>
        <a href="{% url 'game:game_join' %}" class="btn btn-secondary hero-btn-secondary">
          Join Fight
        </a>
        {% else %}
        <a href="{% url 'game:game_join' %}" class="btn btn-primary hero-btn-main">
          Join with code
        </a>
        <a href="{% url 'login' %}" class="btn btn-secondary hero-btn-secondary">
          Login to create game
        </a>
        {% endif %}
      </div>

      {# Secondary Link #}
      {% if user.is_authenticated %}
      <p class="hero-small">
        Or <a href="{% url 'game:game_list' %}">view existing games</a>
        you are already part of.
      </p>
      {% endif %}
    </div>

    {# Right: Animated Chest #}
    <div class="hero-right">
      <div class="chest-wrap" id="chest" data-closed="{% static 'images/box_closed.png' %}"
        data-open="{% static 'images/open.png' %}" data-items='[
        "{% static "images/coin.png" %}",
        "{% static "images/heal.png" %}",
        "{% static "images/move.png" %}",
        "{% static "images/question.png" %}",
        "{% static "images/reroll.png" %}",
        "{% static "images/shield.png" %}",
        "{% static "images/swap.png" %}"
      ]'>
        <img class="chest-visual" src="{% static 'images/box_closed.png' %}" alt="Chest" />

        <img class="chest-item" src="{% static 'images/coin.png' %}" alt="Item" />
      </div>
    </div>
  </div>
</section>

{# === 2. LIVE GAME ENERGY STRIP === #}
<div class="stats-strip">
  <div class="stats-grid">
    <div class="stat-item">
      <span class="stat-value">Active</span>
      <span class="stat-label">System Status</span>
    </div>
    <div class="stat-item">
      <span class="stat-value">2‚Äì4</span>
      <span class="stat-label">Players / Match</span>
    </div>
    <div class="stat-item">
      <span class="stat-value">FAST</span>
      <span class="stat-label">Turn Speed</span>
    </div>
    <div class="stat-item">
      <span class="stat-value">100%</span>
      <span class="stat-label">Fair Play</span>
    </div>
  </div>
</div>

{# === 3. HOW GAME WORKS ‚Äî BOARD FLOW === #}
<section class="how-it-works">
  <div class="content-container">
    <h2 class="section-title-v2">Master The Flow</h2>

    <div class="steps-grid">
      <!-- Step 1 -->
      <div class="step-card">
        <span class="step-number">01</span>
        <div class="step-icon">‚öîÔ∏è</div>
        <h3 class="step-title">Join or Create</h3>
        <p class="step-desc">
          Enter the lobby. Up to 4 players connect instantly via browser. No install needed.
        </p>
      </div>

      <!-- Step 2 -->
      <div class="step-card">
        <span class="step-number">02</span>
        <div class="step-icon">üé≤</div>
        <h3 class="step-title">Roll & Move</h3>
        <p class="step-desc">
          Navigate the digital board. Every tile triggers a chaotic event, trap, or bonus.
        </p>
      </div>

      <!-- Step 3 -->
      <div class="step-card">
        <span class="step-number">03</span>
        <div class="step-icon">‚ö°</div>
        <h3 class="step-title">Outthink</h3>
        <p class="step-desc">
          Answer blitz questions to earn coins. Use cards to hack the board or shield yourself.
        </p>
      </div>

      <!-- Step 4 -->
      <div class="step-card">
        <span class="step-number">04</span>
        <div class="step-icon">üèÜ</div>
        <h3 class="step-title">Dominate</h3>
        <p class="step-desc">
          Reach the goal first or be the last survivor. The board remembers the victors.
        </p>
      </div>
    </div>
  </div>
</section>

{# === 4. GAME WORLD SHOWCASE === #}
<section class="game-showcase">
  <div class="showcase-container">
    <div class="showcase-tabs">
      <button class="tab-btn active" onclick="switchTab('board')">Board View</button>
      <button class="tab-btn" onclick="switchTab('cards')">Card System</button>
      <button class="tab-btn" onclick="switchTab('strategy')">Match Strategy</button>
    </div>

    <div class="showcase-preview">
      <!-- Tab 1: Board View -->
      <div id="tab-board" class="tab-content active">
        <div class="mini-board-wrap">
          <div class="mini-board-grid">
            <div class="mini-token"></div>
          </div>
        </div>
        <div class="preview-content" style="margin-top: 2rem;">
          <h3>Tactical Board Interface</h3>
          <p>Visualize the battlefield. Every tile counts.</p>
        </div>
      </div>

      <!-- Tab 2: Card System -->
      <div id="tab-cards" class="tab-content">
        <div class="mini-deck">
          <div class="mini-card">‚öîÔ∏è</div>
          <div class="mini-card">üõ°Ô∏è</div>
          <div class="mini-card">üé≤</div>
        </div>
        <div class="preview-content" style="margin-top: 2rem;">
          <h3>Deck Building</h3>
          <p>Collect powerful cards to buff yourself or trap opponents.</p>
        </div>
      </div>

      <!-- Tab 3: Match Strategy -->
      <div id="tab-strategy" class="tab-content">
        <div class="mini-graph">
          <div class="graph-node gn-1"></div>
          <div class="graph-node gn-2"></div>
          <div class="graph-node gn-3"></div>
          <div class="graph-line gl-1"></div>
          <div class="graph-line gl-2"></div>
        </div>
        <div class="preview-content" style="margin-top: 2rem;">
          <h3>Mind Games</h3>
          <p>Predict your opponents' moves and counter them instantly.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  function switchTab(tabId) {
    // Hide all tabs
    document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));

    // Show selected tab
    document.getElementById('tab-' + tabId).classList.add('active');

    // Highlight button
    // Find button that triggered this (simpler way without passing event)
    const buttons = document.querySelectorAll('.tab-btn');
    if (tabId === 'board') buttons[0].classList.add('active');
    if (tabId === 'cards') buttons[1].classList.add('active');
    if (tabId === 'strategy') buttons[2].classList.add('active');
  }
</script>

{# === 5. COMPETITIVE FEATURES === #}
<section class="competitive-features">
  <div class="features-cols">
    <div class="feature-col">
      <div class="col-title">Smart Strategy</div>
      <p class="col-desc">
        Not just luck. Use inventory items and knowledge to manipulate the odds.
      </p>
    </div>
    <div class="feature-col">
      <div class="col-title">Real Multiplayer</div>
      <p class="col-desc">
        Seamless WebSocket connections for instant updates and live rivalry.
      </p>
    </div>
    <div class="feature-col">
      <div class="col-title">Skill Based</div>
      <p class="col-desc">
        Victory goes to the sharpest mind. Prove your worth in the arena.
      </p>
    </div>
  </div>
</section>

{# === 7. FINAL CONVERSION BLOCK === #}
<section class="final-cta">
  <div class="content-container">
    <h2 class="hero-title-v2" style="font-size: 3.5rem;">Ready To Roll?</h2>
    <p class="hero-subtitle-v2">
      Browser Based ‚Ä¢ No Install ‚Ä¢ Instant Play
    </p>

    <div class="hero-actions-v2" style="margin-top: 2rem;">
      {% if user.is_authenticated %}
      <a href="{% url 'game:game_create' %}" class="btn-neon">
        Enter Your First Match
      </a>
      {% else %}
      <a href="{% url 'signup' %}" class="btn-neon">
        Create Account
      </a>
      {% endif %}
    </div>
  </div>
</section>

{% endblock %}